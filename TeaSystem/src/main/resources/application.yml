server:
  port: 8089
  servlet:
    context-path: /api

# 文件上传配置
file:
  upload-path: uploads
  access-url: /api/uploads

spring:
  # 文件上传限制
  servlet:
    multipart:
      max-file-size: 5MB
      max-request-size: 10MB

  application:
    name: tea-system

  # 数据源配置
  datasource:
    driver-class-name: com.mysql.cj.jdbc.Driver
    url: jdbc:mysql://localhost:3306/tea_system?useUnicode=true&characterEncoding=utf-8&useSSL=false&serverTimezone=Asia/Shanghai&allowPublicKeyRetrieval=true
    username: root
    password: 123456

  # Redis配置
  redis:
    host: localhost
    port: 6379
    #    password:
    database: 1
    timeout: 5000ms
    lettuce:
      pool:
        max-active: 8
        max-wait: -1ms
        max-idle: 8
        min-idle: 0

  # Jackson配置
  jackson:
    date-format: yyyy-MM-dd HH:mm:ss
    time-zone: Asia/Shanghai
    default-property-inclusion: non_null
  # 禁用Spring Data自动仓库扫描
  data:
    elasticsearch:
      repositories:
        enabled: true
    redis:
      repositories:
        enabled: false

# MyBatis配置
mybatis:
  type-aliases-package: org.example.teasystem.entity
  configuration:
    map-underscore-to-camel-case: true
    log-impl: org.apache.ibatis.logging.stdout.StdOutImpl

# JWT配置
jwt:
  secret: TeaSystemSecretKey2024VeryLongSecretKeyForJWT
  expiration: 7200000  # 2小时(毫秒)
  header: Authorization
  prefix: "Bearer "

# 日志配置
logging:
  level:
    org.example.teasystem: debug
    org.springframework.security: debug
  pattern:
    console: "%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n"

# Knife4j/Swagger配置
springdoc:
  api-docs:
    path: /v3/api-docs
  swagger-ui:
    path: /swagger-ui.html
    enabled: true
  info:
    title: 茶叶销售系统API文档
    description: 茶叶销售系统后端接口文档
    version: 1.0.0
knife4j:
  enable: true
  setting:
    language: zh_cn
    enable-swagger-models: true
    enable-document-manage: true
    swagger-model-name: 实体类列表

# 搜索配置（在此开关ES/MySQL）
search:
  # 是否使用Elasticsearch (false=使用MySQL, true=使用ES)
  use-elasticsearch: true

# Elasticsearch配置
elasticsearch:
  uris: http://localhost:9201  # 注意：必须加 https://
  username: elastic
  password: "123456"            # 你刚刚修改后的密码
  ssl:
    enabled: false
# 阿里云短信配置
aliyun:
  sms:
    access-key-id: ${ALIYUN_SMS_ACCESS_KEY_ID:your-access-key-id}
    access-key-secret: ${ALIYUN_SMS_ACCESS_KEY_SECRET:your-access-key-secret}
    sign-name: 茶叶销售系统
    template-code: SMS_123456789
    # 开发模式：true时使用super-code作为万能验证码，不实际发送短信
    dev-mode: true
    super-code: "1234"
ai:
  provider: qwen
  api-key: sk-47597fe0f86c4561ac9c90a93f902456
  # 使用OpenAI兼容模式API
  base-url: https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions
  model: qwen-max
  # 多模态模型配置（用于图片分析/OCR）
  multimodal:
    model: qwen-vl-max
    base-url: https://dashscope.aliyuncs.com/api/v1/services/aigc/multimodal-generation/generation
